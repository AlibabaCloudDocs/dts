# 产品功能FAQ

本文为您列出数据传输服务DTS（Data Transmission Service）的常见问题和相关解答。

-   热点问题
    -   [DTS支持哪些数据库？](#section_n4q_38f_qxm)
    -   [数据迁移、数据同步或数据订阅的工作原理是什么？](#section_ygj_70v_7mu)
    -   [数据迁移和数据同步的区别是什么？](#section_8yo_tqz_gwl)
    -   [同步延迟的计算规则是什么？](#section_ag8_doq_sq7)
    -   [如何解决DTS无法连接数据库的问题？](#section_np4_7e2_k21)
-   规格与计费问题
    -   [DTS如何收费？](#section_stl_285_48e)
    -   [不同的链路规格有什么区别？](#section_0xy_32u_rg2)
    -   [链路规格是否支持降级？](#section_tmj_cm6_9jm)
    -   [为什么数据同步的价格普遍高于数据迁移？](#section_k32_hxn_llm)
-   功能特性问题
    -   [是否支持跨云账号的数据迁移或数据同步？](#section_3qu_2jx_itv)
    -   [源或目标实例位于DTS暂不支持的地区，如何进行数据迁移和同步？](#section_ttw_4op_u25)
    -   [是否支持只读实例为源的数据迁移、同步或者订阅？](#section_i5x_fjh_qz5)
    -   [是否支持同一实例内的数据迁移？](#section_xsb_ru0_zcj)
    -   [是否支持DML或DDL操作的实时迁移或同步？](#section_icj_d5d_pvf)
    -   [DTS是否支持分库分表的数据迁移或数据同步？](#section_ipd_ru6_sbz)
    -   [DTS是否支持跨时区或字符集的数据迁移或数据同步？](#section_zk8_h10_gye)
    -   [是否支持更改数据迁移或数据同步的对象在目标库中的名称？](#section_8ud_rx7_tlh)
    -   [是否支持过滤部分字段或数据？](#section_79e_b54_nr9)
    -   [数据同步是否支持新增或移除同步对象？](#section_7s5_yc6_27v)
    -   [源或目标实例位于DTS暂不支持的地区，如何进行数据迁移和同步？](#section_fs8_jvq_wrh)
-   配置问题
    -   [如何查看数据迁移或数据同步的性能信息？](#section_1kk_pik_p30)
    -   [如何配置延迟告警及阈值？](#section_cj7_ul6_r8w)
    -   [如何消费订阅的数据？](#section_p2d_kbg_127)

## DTS支持哪些数据库？

DTS支持RDBMS、NoSQL、OLAP等数据源间的数据交互，详情请参见[支持的数据库](/cn.zh-CN/产品简介/支持的数据库.md)。

**说明：** DTS同时支持将第三方云厂商的数据库迁移或同步至阿里云，相关案例请参见[DTS数据迁移方案概览](/cn.zh-CN/数据迁移/DTS数据迁移方案概览.md)。

## 数据迁移、数据同步或数据订阅的工作原理是什么？

详情请参见[产品架构及功能原理](/cn.zh-CN/产品简介/产品架构及功能原理.md)。

## 数据迁移和数据同步的区别是什么？

|对比项|数据迁移|数据同步|
|:--|:---|:---|
|适用场景|主要用于上云迁移，例如将本地数据库、ECS上的自建数据库或第三方云数据库迁移至阿里云数据库。 它属于一次性任务，迁移完成后即可释放实例。

|主要用于两个数据源之间的数据实时同步，适用于异地多活、数据灾备、跨境数据同步、查询与报表分流、云BI及实时数据仓库等场景。 它属于持续性任务，任务创建后会一直同步数据，保持数据源和数据目标的数据一致性。 |
|支持的数据库|详情请参见[支持的数据库](/cn.zh-CN/产品简介/支持的数据库.md)。|详情请参见[支持的数据库](/cn.zh-CN/产品简介/支持的数据库.md)。|
|支持的数据库部署位置|-   **有公网IP的自建数据库**
-   **无公网IP:Port的数据库（通过数据库网关DG接入）**
-   **通过云企业网CEN接入的自建数据库**
-   **ECS上的自建数据库**
-   **通过专线/VPN网关/智能接入网关接入的自建数据库**

|-   **ECS上的自建数据库**
-   **通过专线/VPN网关/智能接入网关接入的自建数据库**
-   **无公网IP:Port的数据库（通过数据库网关DG接入）**
-   **通过云企业网CEN接入的自建数据库**

**说明：** 数据同步基于内网传输，可以保证更低的网络延时。 |
|功能特性差异|-   支持库表列三级对象名映射。
-   支持过滤待迁移的数据。
-   支持选择同步的SQL操作类型，例如选择仅同步INSERT操作。

**说明：** 该功能仅在MySQL数据库间的迁移下支持。

-   支持读取其他阿里云账号下的专有网络，通过该功能可以实现跨阿里云账号迁移专有网络下的自建数据库。

|-   支持库表列三级对象名映射。
-   支持过滤待同步的数据。
-   支持在线修改同步对象。
-   支持MySQL间的双向同步。
-   支持选择同步的SQL操作类型，例如选择仅同步INSERT操作。 |
|计费方式|仅支持按量付费。|支持按量付费和包年包月。|
|计费规则|仅在增量数据迁移正常运行期间计费（包含增量数据迁移暂停期间），结构迁移和全量数据迁移期间不计费。|-   按量付费时，实例完成配置且成功启动后开始计费（包含启动后的暂停期间）。
-   包年包月时，按照购买时选择的配置和购买量一次性扣费。 |

**说明：** 对于某些数据同步不支持的数据库（例如MongoDB实例），您可以通过增量数据迁移的方式来实现数据同步。

## 同步延迟的计算规则是什么？

同步到目标库最后一条数据的时间戳，与当前时间戳的差值，单位为毫秒。

## 如何解决DTS无法连接数据库的问题？

详情请参见[源库连接性检查](/cn.zh-CN/数据迁移/预检查及修复方法/DTS预检查阶段对源数据库进行连接性检查.md)和[目标数据库连接性检查](/cn.zh-CN/数据迁移/预检查及修复方法/DTS数据迁移时目标数据库连接性检查失败.md)。

## DTS如何收费？

详情请参见[产品定价](/cn.zh-CN/产品定价/产品定价.md)。

## 不同的链路规格有什么区别？

详情请参见[数据迁移链路规格说明](/cn.zh-CN/产品简介/规格说明/数据迁移链路规格说明.md)和[数据同步链路规格说明](/cn.zh-CN/产品简介/规格说明/数据同步链路规格说明.md)。

## 链路规格是否支持降级？

暂不支持。

## 为什么数据同步的价格普遍高于数据迁移？

数据同步具有更多的高级特性，例如在线调整同步对象、MySQL双向同步，且数据同步基于内网传输，可以保证更低的网络延时。

## 是否支持跨云账号的数据迁移或数据同步？

-   数据迁移：
    -   可直接支持RDS MySQL的跨账号迁移，请参见[跨阿里云账号迁移RDS实例](/cn.zh-CN/数据迁移/跨阿里云账号实例间迁移/跨阿里云账号迁移RDS实例.md)。
    -   PolarDB MySQL的跨账号迁移，请参见[跨阿里云账号迁移PolarDB MySQL集群](/cn.zh-CN/数据迁移/跨阿里云账号实例间迁移/跨阿里云账号迁移PolarDB MySQL集群.md) 。
    -   其他类型的数据库实例（例如DRDS、Redis、MongoDB），可将其作为**有公网IP的自建数据库**进行跨云账号迁移。
-   数据同步：当前仅支持RDS MySQL的跨账号同步，详情请参见[不同阿里云账号下RDS MySQL实例间的数据同步](/cn.zh-CN/数据同步/MySQL间数据同步/不同阿里云账号下RDS MySQL实例间的数据同步.md)。

    **说明：** 由于数据同步暂不支持将数据库实例作为**有公网IP的自建数据库**接入，因此暂不支持除RDS MySQL外的跨账号同步。


## 源或目标实例位于DTS暂不支持的地区，如何进行数据迁移和同步？

-   如果是数据迁移任务，您可以为数据库实例（如RDS MySQL）申请公网地址，作为**有公网IP的自建数据库**接入，实例地区可以选择DTS支持的地区，比如杭州，并需要将对应地区的DTS服务器IP地址段添加到实例的白名单中，请参见[迁移、同步或订阅本地数据库时需添加的IP白名单](/cn.zh-CN/准备工作/迁移、同步或订阅本地数据库时需添加的IP白名单.md)。
-   如果是数据同步任务，由于数据同步暂不支持将数据库实例作为**有公网IP的自建数据库**接入，因此DTS暂不支持这些地区的数据同步。

## 是否支持只读实例为源的数据迁移、同步或者订阅？

仅全量迁移、结构迁移支持将只读实例（比如RDS只读实例、PolarDB只读实例）为源，增量数据迁移、数据同步或数据订阅不支持。这是由于增量数据迁移、数据同步和订阅是通过读取源实例的增量日志（例如Binlog）来实现的，而只读实例并不记录事务日志。

## 是否支持同一实例内的数据迁移？

支持，相关案例请参见[不同库名间的数据迁移](/cn.zh-CN/最佳实践/不同库名间的数据迁移.md)。

## 是否支持DML或DDL操作的实时迁移或同步？

支持，关系数据库之间的数据迁移或同步，支持的DML操作为INSERT、UPDATE、DELETE，支持的DDL操作为CREATE、DROP、ALTER、RENAME、TRUNCATE。

**说明：** 不同场景下支持的DML或DDL操作有所区别，例如从MySQL同步到AnalyticDB MySQL（2.0）时，DDL仅支持CREATE TABLE、ALTER TABLE、DROP TABLE，DML仅支持INSERT、UPDATE、DELETE，请在[DTS数据迁移方案概览](/cn.zh-CN/数据迁移/DTS数据迁移方案概览.md)和[DTS数据同步方案概览](/cn.zh-CN/数据同步/DTS数据同步方案概览.md)中选择符合业务场景的链路，在具体链路配置文档中查看支持的DML或DDL操作。

## DTS是否支持分库分表的数据迁移或数据同步？

支持，例如将MySQL、PolarDB MySQL中的分库分表迁移或同步到AnalyticDB for MySQL中，以实现多表归并。

## DTS是否支持跨时区或字符集的数据迁移或数据同步？

支持。

## 是否支持更改数据迁移或数据同步的对象在目标库中的名称？

支持，DTS支持库名、表名、列名的名称映射，详情请参见[库表列映射](/cn.zh-CN/数据迁移/迁移任务管理/库表列映射.md)或[设置同步对象在目标实例中的名称](/cn.zh-CN/数据同步/同步作业管理/设置同步对象在目标实例中的名称.md)。

## 是否支持过滤部分字段或数据？

支持，DTS支持过滤数据表的部分字段或数据，详情请参见[过滤待迁移数据](/cn.zh-CN/数据迁移/迁移任务管理/过滤待迁移数据.md)或[通过SQL条件过滤待同步数据](/cn.zh-CN/数据同步/同步作业管理/通过SQL条件过滤待同步数据.md)。

## 数据同步是否支持新增或移除同步对象？

支持，详情请参见[新增同步对象](/cn.zh-CN/数据同步/同步作业管理/新增同步对象.md)或[移除同步对象](/cn.zh-CN/数据同步/同步作业管理/移除同步对象.md)。

## 数据同步或迁移任务时，目标库修改数据的影响，以及修改是否生效？

-   目标库修改数据有可能导致DTS任务失败。数据迁移或同步过程中，如果对目标库待迁移或同步的对象执行操作，可能会导致主键冲突，无更新记录等情况，最终DTS任务失败。但是可以执行不会导致DTS任务中断的操作，比如在目标实例创建一个表并执行写入，因为不在该表迁移或同步对象表中，因此不会引导致DTS失败。
-   由于DTS是读取源实例数据库信息，将其全量数据、结构数据、增量数据迁移或同步到目标实例中，因此任务进行时目标库修改数据可能会被来自源库迁移或同步的数据覆盖。

## 如何查看数据迁移或数据同步的性能信息？

详情请参见[查看增量迁移链路状态和性能](/cn.zh-CN/数据迁移/迁移任务管理/查看增量迁移链路状态和性能.md)或[查看同步链路状态和性能](/cn.zh-CN/数据同步/同步作业管理/查看同步链路状态和性能.md)。

## 如何配置延迟告警及阈值？

DTS提供了监控报警功能，您可以通过控制台对重要的监控指标设置报警规则，让您第一时间了解运行状态，详情请参见[配置监控报警](/cn.zh-CN/数据同步/同步作业管理/配置监控报警.md)。

## 如何消费订阅的数据？

-   旧版数据订阅：通过SDK实现订阅数据的消费，详情请参见[使用SDK消费订阅数据](~~26647~~)。

    **说明：** 当前SDK仅支持Java语言，SDK版本信息请参见[下载SDK](~~26648~~)。

-   新版数据订阅：通过kafka client实现订阅数据的消费，详情请参见[使用Kafka客户端消费订阅数据](/cn.zh-CN/数据订阅/数据订阅（新版）/使用Kafka客户端消费订阅数据.md)。

