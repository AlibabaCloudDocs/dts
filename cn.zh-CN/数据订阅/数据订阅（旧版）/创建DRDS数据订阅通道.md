# 创建DRDS数据订阅通道

通过数据订阅功能，您可以实时订阅源库的增量数据，轻松帮助业务实现轻量级缓存更新、业务异步解耦、含ETL逻辑的数据实时同步等场景。本文将介绍如何创建DRDS数据订阅通道。

PolarDB-X中的数据库须基于RDS MySQL创建，且RDS MySQL版本需为5.5或5.6。

**说明：** DTS暂不支持订阅基于PolarDB MySQL创建的PolarDB-X数据库。

## 注意事项

-   订阅通道保存最近24小时的数据，过时的数据将会从订阅通道中删除。
-   数据订阅通道运行期间，请勿对DRDS实例执行扩容、缩容、迁移热点表、变更拆分键和变更DDL等操作，否则将导致数据订阅失败。
-   此场景中，数据订阅通道配置完成后，不支持[修改订阅对象](/cn.zh-CN/数据订阅/数据订阅（旧版）/修改订阅对象.md)。

## 操作步骤

1.  购买数据订阅通道，详情请参见[购买流程](/cn.zh-CN/快速入门/购买流程.md)。

    **说明：** 需选择**订阅实例类型**为**DRDS**。

2.  登录[数据传输控制台](https://dts.console.aliyun.com/)。

3.  在左侧导航栏，单击**数据订阅**。

4.  在数据订阅列表页面顶部，选择订阅通道所属地域。

    ![选择地域](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1428919951/p51699.png)

5.  定位至已购买的数据订阅通道，单击**配置订阅通道**。

6.  配置数据订阅的源库信息。

    ![配置源库信息](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1428919951/p72318.png)

    |类别|配置|说明|
    |:-|:-|:-|
    |无|订阅名称|DTS会自动生成一个订阅名称，建议配置具有业务意义的名称（无唯一性要求），便于后续识别。|
    |源库信息|实例类型|选择**DRDS实例**。|
    |数据库类型|固定为**DRDS**，不可变更。|
    |实例地区|购买数据订阅通道时选择的**源实例地域**，不可变更。|
    |DRDS实例ID|选择待订阅的DRDS实例ID。|
    |数据库名称|选择DRDS实例中待订阅的数据库。|
    |数据库账号|填入DRDS实例的数据库账号。|
    |数据库密码|填入该数据库账号对应的密码。|

7.  上述配置完成后，单击**授权白名单并进入下一步**。

    **说明：** 此步骤会将DTS服务器的IP地址自动添加到源DRDS实例的白名单中，用于保障DTS服务器能够正常连接源实例。

8.  配置需要订阅的数据类型和订阅对象。

    ![选择订阅类型和对象](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1428919951/p111938.png)

    |配置|说明|
    |:-|:-|
    |需要订阅的数据类型|    -   **数据更新**

订阅已选择对象的增量数据更新，包含数据的INSERT、DELETE和UPDATE操作。

    -   **结构更新**

订阅整个实例所有对象的结构创建、删除及修改，您需要使用数据订阅客户端过滤所需的数据。 |
    |订阅对象|在订阅对象框中将想要订阅的对象选中，单击![向右小箭头](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8502659951/p40698.png)图标将其移动到已选择对象框。**说明：** 此场景中，订阅对象的选择粒度为表，暂不支持选择整个库作为订阅对象。 |

9.  上述配置完成后，单击页面右下角的**保存并预检查**。

    **说明：**

    -   在订阅任务正式启动之前，会先进行预检查。只有预检查通过后，才能成功启动订阅任务。
    -   如果预检查失败，单击具体检查项后的![提示](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8502659951/p47468.png)图标，查看失败详情。根据提示修复问题后，重新进行预检查。
10. 在预检查对话框中显示**预检查通过**后，关闭预检查对话框，订阅通道进入初始化阶段。


配置完成后，数据订阅通道会进入初始化阶段。初始化完成后即可消费订阅数据，详情请参见[使用SDK示例代码消费订阅数据](/cn.zh-CN/数据订阅/数据订阅（旧版）/使用SDK示例代码消费订阅数据.md)。

