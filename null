# 如何排查DTS全量迁移慢/迁移卡住

本文介绍排查DTS全量迁移慢/卡住的方法。

## 问题现象

DTS在进行全量迁移时，出现迁移耗时很久的现象，或者出现迁移任务卡住的迹象。

## 排查方法

可根据如下方法进行排查：

-   排查源库：
    -   预估迁移时间：排查源库待迁移对象的数据量级。
    -   排查任务并行情况：检查是否同时建立了多个任务。

        **说明：** 多任务并行可能造成一时性的资源紧张，建议分批分时段建立任务。

    -   排查账号密码准确性：检查源库的用户名及密码是否正确。
    -   排查白名单设置：检查是否已完整添加白名单。参见：[迁移、同步或订阅本地数据库时需添加的IP白名单](https://help.aliyun.com/document_detail/84900.html?spm=5176.11065259.1996646101.searchclickresult.2e835bd80GkiBy)。
    -   排查主键和索引情况：检查源库大表是否都有主键或唯一索引。

        **说明：** 普通索引或无索引可能会出现多数据现象。

-   排查目标库：
    -   排查账号密码准确性：检查目标库的用户名及密码是否正确。
    -   排查白名单设置：检查是否已完整添加白名单。参见：[迁移、同步或订阅本地数据库时需添加的IP白名单](https://help.aliyun.com/document_detail/84900.html?spm=5176.11065259.1996646101.searchclickresult.2e835bd80GkiBy)。
    -   排查实例类型：检查目标库实例是否为只读实例。

        **说明：** 只读实例不支持写入。

    -   排查磁盘空间：检查目标库的磁盘空间是否已满。
    -   排查性能负荷情况：检查目标库的负荷状况，是否达到了性能瓶颈。
    -   排查死锁情况：检查目标库是否存在死锁。

        **说明：** 出现死锁，会导致数据无法写入。

-   排查网络：检查网络的连通性是否正常，网络带宽是否存在限制，在条件允许的情况下建议升级带宽。

